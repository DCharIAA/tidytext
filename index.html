<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text Mining using dplyr, ggplot2, and Other Tidy Tools â€¢ tidytext</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Text Mining using dplyr, ggplot2, and Other Tidy Tools">
<meta property="og:description" content="Text mining for word processing and sentiment analysis using
    dplyr, ggplot2, and other tidy tools.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">tidytext</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/tidytext.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/tf_idf.html">Term Frequency and Inverse Document Frequency (tf-idf) Using Tidy Data Principles</a>
    </li>
    <li>
      <a href="articles/tidying_casting.html">Converting to and from Document-Term Matrix and Corpus objects</a>
    </li>
    <li>
      <a href="articles/topic_modeling.html">Tidy Topic Modeling</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/juliasilge/tidytext">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="tidytext-text-mining-using-dplyr-ggplot2-and-other-tidy-tools" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#tidytext-text-mining-using-dplyr-ggplot2-and-other-tidy-tools" class="anchor"></a>tidytext: Text mining using dplyr, ggplot2, and other tidy tools <img src="reference/figures/tidytext.png" align="right">
</h1></div>
<p><strong>Authors:</strong> <a href="https://juliasilge.com/">Julia Silge</a>, <a href="http://varianceexplained.org/">David Robinson</a><br><strong>License:</strong> <a href="https://opensource.org/licenses/MIT">MIT</a></p>
<p><a href="https://github.com/juliasilge/tidytext/actions"><img src="https://github.com/juliasilge/tidytext/workflows/R-CMD-check/badge.svg" alt="R build status"></a> <a href="https://travis-ci.org/juliasilge/tidytext"><img src="https://travis-ci.org/juliasilge/tidytext.svg?branch=master" alt="Build Status"></a> <a href="https://ci.appveyor.com/project/juliasilge/tidytext"><img src="https://ci.appveyor.com/api/projects/status/github/juliasilge/tidytext?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a> <a href="https://cran.r-project.org/package=tidytext"><img src="http://www.r-pkg.org/badges/version/tidytext" alt="CRAN_Status_Badge"></a> <a href="https://cran.r-project.org/web/checks/check_results_tidytext.html"><img src="https://cranchecks.info/badges/summary/tidytext" alt="cran checks"></a> <a href="https://codecov.io/github/juliasilge/tidytext?branch=master"><img src="https://img.shields.io/codecov/c/github/juliasilge/tidytext/master.svg" alt="Coverage Status"></a> <a href="https://zenodo.org/badge/latestdoi/22224/juliasilge/tidytext"><img src="https://zenodo.org/badge/22224/juliasilge/tidytext.svg" alt="DOI"></a> <a href="http://joss.theoj.org/papers/89fd1099620268fe0342ffdcdf66776f"><img src="http://joss.theoj.org/papers/89fd1099620268fe0342ffdcdf66776f/status.svg" alt="status"></a> <a href="https://CRAN.R-project.org/package=tidytext"><img src="https://cranlogs.r-pkg.org/badges/tidytext" alt="Downloads"></a> <a href="https://CRAN.R-project.org/package=tidytext"><img src="https://cranlogs.r-pkg.org/badges/grand-total/tidytext?color=orange" alt="Total Downloads"></a></p>
<p>Using <a href="https://www.jstatsoft.org/article/view/v059i10">tidy data principles</a> can make many text mining tasks easier, more effective, and consistent with tools already in wide use. Much of the infrastructure needed for text mining with tidy data frames already exists in packages like <a href="https://cran.r-project.org/package=dplyr">dplyr</a>, <a href="https://cran.r-project.org/package=broom">broom</a>, <a href="https://cran.r-project.org/package=tidyr">tidyr</a> and <a href="https://cran.r-project.org/package=ggplot2">ggplot2</a>. In this package, we provide functions and supporting data sets to allow conversion of text to and from tidy formats, and to switch seamlessly between tidy tools and existing text mining packages. Check out <a href="https://www.tidytextmining.com/">our book</a> to learn more about text mining using tidy data principles.</p>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h3>
<p>You can install this package from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"tidytext"</span>)</a></code></pre></div>
<p>Or you can install the development version from GitHub with <a href="https://github.com/r-lib/remotes">remotes</a>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(remotes)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"juliasilge/tidytext"</span>)</a></code></pre></div>
</div>
<div id="tidy-text-mining-example-the-unnest_tokens-function" class="section level3">
<h3 class="hasAnchor">
<a href="#tidy-text-mining-example-the-unnest_tokens-function" class="anchor"></a>Tidy text mining example: the <code>unnest_tokens</code> function</h3>
<p>The novels of Jane Austen can be so tidy! Letâ€™s use the text of Jane Austenâ€™s 6 completed, published novels from the <a href="https://cran.r-project.org/package=janeaustenr">janeaustenr</a> package, and bring them into a tidy format. janeaustenr provides them as a one-row-per-line format:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(janeaustenr)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">original_books &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/janeaustenr/man/austen_books.html">austen_books</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(book) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">line =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/ranking.html">row_number</a></span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span>()</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">original_books</a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; # A tibble: 73,422 x 3</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;    text                    book                 line</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;    &lt;chr&gt;                   &lt;fct&gt;               &lt;int&gt;</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;  1 "SENSE AND SENSIBILITY" Sense &amp; Sensibility     1</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;  2 ""                      Sense &amp; Sensibility     2</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;  3 "by Jane Austen"        Sense &amp; Sensibility     3</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;  4 ""                      Sense &amp; Sensibility     4</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt;  5 "(1811)"                Sense &amp; Sensibility     5</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt;  6 ""                      Sense &amp; Sensibility     6</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt;  7 ""                      Sense &amp; Sensibility     7</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt;  8 ""                      Sense &amp; Sensibility     8</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt;  9 ""                      Sense &amp; Sensibility     9</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; 10 "CHAPTER 1"             Sense &amp; Sensibility    10</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt; # â€¦ with 73,412 more rows</span></a></code></pre></div>
<p>To work with this as a tidy dataset, we need to restructure it as <strong>one-token-per-row</strong> format. The <code>unnest_tokens</code> function is a way to convert a dataframe with a text column to be one-token-per-row:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidytext)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">tidy_books &lt;-<span class="st"> </span>original_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/unnest_tokens.html">unnest_tokens</a></span>(word, text)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">tidy_books</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; # A tibble: 725,055 x 3</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;    book                 line word       </span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt;    &lt;fct&gt;               &lt;int&gt; &lt;chr&gt;      </span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt;  1 Sense &amp; Sensibility     1 sense      </span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt;  2 Sense &amp; Sensibility     1 and        </span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt;  3 Sense &amp; Sensibility     1 sensibility</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt;  4 Sense &amp; Sensibility     3 by         </span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt;  5 Sense &amp; Sensibility     3 jane       </span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt;  6 Sense &amp; Sensibility     3 austen     </span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt;  7 Sense &amp; Sensibility     5 1811       </span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt;  8 Sense &amp; Sensibility    10 chapter    </span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt;  9 Sense &amp; Sensibility    10 1          </span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt; 10 Sense &amp; Sensibility    13 the        </span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt; # â€¦ with 725,045 more rows</span></a></code></pre></div>
<p>This function uses the <a href="https://github.com/lmullen/tokenizers">tokenizers package</a> to separate each line into words. The default tokenizing is for words, but other options include characters, n-grams, sentences, lines, paragraphs, or separation around a regex pattern.</p>
<p>Now that the data is in one-word-per-row format, we can manipulate it with tidy tools like dplyr. We can remove stop words (available via the function <code><a href="reference/get_stopwords.html">get_stopwords()</a></code>) with an <code>anti_join</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">tidy_books &lt;-<span class="st"> </span>tidy_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">anti_join</a></span>(<span class="kw"><a href="reference/get_stopwords.html">get_stopwords</a></span>())</a></code></pre></div>
<p>We can also use <code>count</code> to find the most common words in all the books as a whole.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">tidy_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(word, <span class="dt">sort =</span> <span class="ot">TRUE</span>) </a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; # A tibble: 14,375 x 2</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;    word      n</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;    &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt;  1 mr     3015</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt;  2 mrs    2446</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;  3 must   2071</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt;  4 said   2041</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;  5 much   1935</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;  6 miss   1855</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt;  7 one    1831</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;  8 well   1523</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt;  9 every  1456</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt; 10 think  1440</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt; # â€¦ with 14,365 more rows</span></a></code></pre></div>
<p>Sentiment analysis can be done as an inner join. Three sentiment lexicons are available via the <code><a href="reference/get_sentiments.html">get_sentiments()</a></code> function. Letâ€™s examine how sentiment changes during each novel. Letâ€™s find a sentiment score for each word using the Bing lexicon, then count the number of positive and negative words in defined sections of each novel.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyr)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="reference/get_sentiments.html">get_sentiments</a></span>(<span class="st">"bing"</span>)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt; # A tibble: 6,786 x 2</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt;    word        sentiment</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;  1 2-faces     negative </span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;  2 abnormal    negative </span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;  3 abolish     negative </span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;  4 abominable  negative </span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt;  5 abominably  negative </span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt;  6 abominate   negative </span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt;  7 abomination negative </span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;  8 abort       negative </span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt;  9 aborted     negative </span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt; 10 aborts      negative </span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt; # â€¦ with 6,776 more rows</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"></a>
<a class="sourceLine" id="cb7-18" data-line-number="18">janeaustensentiment &lt;-<span class="st"> </span>tidy_books <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">inner_join</a></span>(<span class="kw"><a href="reference/get_sentiments.html">get_sentiments</a></span>(<span class="st">"bing"</span>), <span class="dt">by =</span> <span class="st">"word"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(book, <span class="dt">index =</span> line <span class="op">%/%</span><span class="st"> </span><span class="dv">80</span>, sentiment) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="st">  </span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/spread.html">spread</a></span>(sentiment, n, <span class="dt">fill =</span> <span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">sentiment =</span> positive <span class="op">-</span><span class="st"> </span>negative)</a>
<a class="sourceLine" id="cb7-23" data-line-number="23"></a>
<a class="sourceLine" id="cb7-24" data-line-number="24">janeaustensentiment</a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="co">#&gt; # A tibble: 920 x 5</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="co">#&gt;    book                index negative positive sentiment</span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27"><span class="co">#&gt;    &lt;fct&gt;               &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="co">#&gt;  1 Sense &amp; Sensibility     0       16       32        16</span></a>
<a class="sourceLine" id="cb7-29" data-line-number="29"><span class="co">#&gt;  2 Sense &amp; Sensibility     1       19       53        34</span></a>
<a class="sourceLine" id="cb7-30" data-line-number="30"><span class="co">#&gt;  3 Sense &amp; Sensibility     2       12       31        19</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31"><span class="co">#&gt;  4 Sense &amp; Sensibility     3       15       31        16</span></a>
<a class="sourceLine" id="cb7-32" data-line-number="32"><span class="co">#&gt;  5 Sense &amp; Sensibility     4       16       34        18</span></a>
<a class="sourceLine" id="cb7-33" data-line-number="33"><span class="co">#&gt;  6 Sense &amp; Sensibility     5       16       51        35</span></a>
<a class="sourceLine" id="cb7-34" data-line-number="34"><span class="co">#&gt;  7 Sense &amp; Sensibility     6       24       40        16</span></a>
<a class="sourceLine" id="cb7-35" data-line-number="35"><span class="co">#&gt;  8 Sense &amp; Sensibility     7       23       51        28</span></a>
<a class="sourceLine" id="cb7-36" data-line-number="36"><span class="co">#&gt;  9 Sense &amp; Sensibility     8       30       40        10</span></a>
<a class="sourceLine" id="cb7-37" data-line-number="37"><span class="co">#&gt; 10 Sense &amp; Sensibility     9       15       19         4</span></a>
<a class="sourceLine" id="cb7-38" data-line-number="38"><span class="co">#&gt; # â€¦ with 910 more rows</span></a></code></pre></div>
<p>Now we can plot these sentiment scores across the plot trajectory of each novel.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(janeaustensentiment, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(index, sentiment, <span class="dt">fill =</span> book)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span>(<span class="dt">stat =</span> <span class="st">"identity"</span>, <span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="op">~</span>book, <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">scales =</span> <span class="st">"free_x"</span>)</a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-9-1.png" alt="plot of chunk unnamed-chunk-9"></p>
<p>For more examples of text mining using tidy data frames, see the tidytext vignette.</p>
</div>
<div id="tidying-document-term-matrices" class="section level3">
<h3 class="hasAnchor">
<a href="#tidying-document-term-matrices" class="anchor"></a>Tidying document term matrices</h3>
<p>Many existing text mining datasets are in the form of a DocumentTermMatrix class (from the tm package). For example, consider the corpus of 2246 Associated Press articles from the topicmodels dataset.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tm)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"AssociatedPress"</span>, <span class="dt">package =</span> <span class="st">"topicmodels"</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">AssociatedPress</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt; &lt;&lt;DocumentTermMatrix (documents: 2246, terms: 10473)&gt;&gt;</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt; Non-/sparse entries: 302031/23220327</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; Sparsity           : 99%</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; Maximal term length: 18</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; Weighting          : term frequency (tf)</span></a></code></pre></div>
<p>If we want to analyze this with tidy tools, we need to transform it into a one-row-per-term data frame first with a <code>tidy</code> function. (For more on the tidy verb, <a href="https://github.com/dgrtwo/broom">see the broom package</a>).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/generics/man/tidy.html">tidy</a></span>(AssociatedPress)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; # A tibble: 302,031 x 3</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt;    document term       count</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt;       &lt;int&gt; &lt;chr&gt;      &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt;  1        1 adding         1</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt;  2        1 adult          2</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt;  3        1 ago            1</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt;  4        1 alcohol        1</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt;  5        1 allegedly      1</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;  6        1 allen          1</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt;  7        1 apparently     2</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt;  8        1 appeared       1</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt;  9        1 arrested       1</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt; 10        1 assault        1</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt; # â€¦ with 302,021 more rows</span></a></code></pre></div>
<p>We could find the most negative documents:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">ap_sentiments &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/generics/man/tidy.html">tidy</a></span>(AssociatedPress) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">inner_join</a></span>(<span class="kw"><a href="reference/get_sentiments.html">get_sentiments</a></span>(<span class="st">"bing"</span>), <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">term =</span> <span class="st">"word"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(document, sentiment, <span class="dt">wt =</span> count) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/spread.html">spread</a></span>(sentiment, n, <span class="dt">fill =</span> <span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">sentiment =</span> positive <span class="op">-</span><span class="st"> </span>negative) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(sentiment)</a></code></pre></div>
<p>Or we can join the Austen and AP datasets and compare the frequencies of each word:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">comparison &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/generics/man/tidy.html">tidy</a></span>(AssociatedPress) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(<span class="dt">word =</span> term) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">rename</a></span>(<span class="dt">AP =</span> n) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">inner_join</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(tidy_books, word)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">rename</a></span>(<span class="dt">Austen =</span> n) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">AP =</span> AP <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(AP),</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">         <span class="dt">Austen =</span> Austen <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(Austen))</a>
<a class="sourceLine" id="cb12-8" data-line-number="8"></a>
<a class="sourceLine" id="cb12-9" data-line-number="9">comparison</a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; # A tibble: 4,730 x 3</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt;    word             AP     Austen</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt;    &lt;chr&gt;         &lt;dbl&gt;      &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt;  1 abandoned 0.000170  0.00000493</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt;  2 abide     0.0000291 0.0000197 </span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt;  3 abilities 0.0000291 0.000143  </span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt;  4 ability   0.000238  0.0000148 </span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt;  5 able      0.000664  0.00151   </span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt;  6 abroad    0.000194  0.000178  </span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">#&gt;  7 abrupt    0.0000291 0.0000247 </span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">#&gt;  8 absence   0.0000776 0.000547  </span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="co">#&gt;  9 absent    0.0000436 0.000247  </span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22"><span class="co">#&gt; 10 absolute  0.0000533 0.000128  </span></a>
<a class="sourceLine" id="cb12-23" data-line-number="23"><span class="co">#&gt; # â€¦ with 4,720 more rows</span></a>
<a class="sourceLine" id="cb12-24" data-line-number="24"></a>
<a class="sourceLine" id="cb12-25" data-line-number="25"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(scales)</a>
<a class="sourceLine" id="cb12-26" data-line-number="26"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(comparison, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(AP, Austen)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-27" data-line-number="27"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-28" data-line-number="28"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">label =</span> word), <span class="dt">check_overlap =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb12-29" data-line-number="29">            <span class="dt">vjust =</span> <span class="dv">1</span>, <span class="dt">hjust =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-30" data-line-number="30"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span>(<span class="dt">labels =</span> <span class="kw"><a href="https://scales.r-lib.org//reference/label_percent.html">percent_format</a></span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-31" data-line-number="31"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_log10</a></span>(<span class="dt">labels =</span> <span class="kw"><a href="https://scales.r-lib.org//reference/label_percent.html">percent_format</a></span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-32" data-line-number="32"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_abline</a></span>(<span class="dt">color =</span> <span class="st">"red"</span>)</a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-13-1.png" alt="plot of chunk unnamed-chunk-13"></p>
<p>For more examples of working with objects from other text mining packages using tidy data principles, see the vignette on converting to and from document term matrices.</p>
</div>
<div id="community-guidelines" class="section level3">
<h3 class="hasAnchor">
<a href="#community-guidelines" class="anchor"></a>Community Guidelines</h3>
<p>This project is released with a <a href="https://github.com/juliasilge/tidytext/blob/master/CONDUCT.md">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms. Feedback, bug reports (and fixes!), and feature requests are welcome; file issues or seek support <a href="http://github.com/juliasilge/tidytext/issues">here</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=tidytext">https://â€‹cloud.r-project.org/â€‹package=tidytext</a>
</li>
<li>Browse source code at <br><a href="https://github.com/juliasilge/tidytext">https://â€‹github.com/â€‹juliasilge/â€‹tidytext</a>
</li>
<li>Report a bug at <br><a href="http://github.com/juliasilge/tidytext/issues">http://â€‹github.com/â€‹juliasilge/â€‹tidytext/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing tidytext</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>David Robinson <br><small class="roles"> Author </small>  </li>
<li>Julia Silge <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3671-836X" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by David Robinson, Julia Silge.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
